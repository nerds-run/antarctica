#!/usr/bin/env bash
#MISE description="View logs for a service (usage: mise run ops:logs <service>)"
set -euo pipefail

SERVICE="${1:?Usage: mise run ops:logs <service-name>}"
KEY_FILE="${ANTARCTICA_SSH_KEY:-/tmp/antarctica-deploy.key}"
HOST="${ANTARCTICA_HOST:-172.22.202.50}"

if [ ! -f "$KEY_FILE" ]; then
  mise run deploy:ssh-key
fi

ssh -i "$KEY_FILE" -o StrictHostKeyChecking=accept-new "antarctica@$HOST" sudo journalctl -u "$SERVICE" -f

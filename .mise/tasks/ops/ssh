#!/usr/bin/env bash
#MISE description="SSH into the Antarctica server"
set -euo pipefail

KEY_FILE="${ANTARCTICA_SSH_KEY:-/tmp/antarctica-deploy.key}"
HOST="${ANTARCTICA_HOST:-172.22.202.50}"

if [ ! -f "$KEY_FILE" ]; then
  echo "SSH key not found at $KEY_FILE, extracting from 1Password..."
  mise run deploy:ssh-key
fi

ssh -i "$KEY_FILE" -o StrictHostKeyChecking=accept-new "antarctica@$HOST" "$@"
